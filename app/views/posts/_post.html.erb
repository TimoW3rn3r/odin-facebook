<div class="my-8 px-8 pt-8 pb-8 flex flex-col bg-white rounded-md drop-shadow-lg">

  <div class="flex gap-2">
    <div>
      <% if post.user.profile_picture.attached? %>
        <%= image_tag post.user.profile_picture.variant(:thumb), class: "h-12 w-12 rounded-full object-cover" %>
      <% else %>
        <%= image_tag "default.jpeg", class: "h-12 w-12 rounded-full object-cover" %>
      <% end %>
    </div>
    <div>
      <div class="font-semibold">
        <%= link_to post.user.full_name, post.user %>
      </div>
      <div class="text-gray-400 text-sm">
        <%#= time_tag post.created_at, "data-local": "time-ago" %>
        <%= local_time_ago(post.created_at) %>
      </div>
    </div>
  </div>
  <p class="mt-2 mb-4 text-lg">
    <%= post.body %>
  </p>
  <div class="flex justify-between text-gray-500">
    <span> â™¡<%= link_to post.likes.size, post_likes_path(post) %> </span>
    <span><%= pluralize(post.comments.size, 'comment') %></span>
  </div>

  <hr>

  <div class="flex gap-4 justify-around items-center text-gray-600 font-semibold">
    <div>
      <% if like = LikesHelper.find_like(post, current_user) %>
        <%= link_to "Like", [post, like],
          data: { turbo_method: :delete },
          class: "text-blue-500 font-bold" %>
      <% else %>
        <%= render "likes/form", likeable: post %>
      <% end %>
    </div>
    <div>
      Comment
    </div>
    <div>
      Share
    </div>
  </div>

  <hr>
  <% if all_comments %>
    
    <div class="px-4 py-2">
      <%= render post.comments %>
    </div>
    <%= render "comments/form", commentable: @post %>

  <% else %>

    <%= render "comments/form", commentable: post %>

    <% if post.comments.any? %>
      <div class="px-4 py-2">
        <%= render post.comments.last %>
      </div>
      <div class="text-slate-500 font-semibold">
        <%= link_to "View all comments", post %>
      </div>
    <% end %>

  <% end %>

</div>
